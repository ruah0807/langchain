# SQL DB와 상호작용하는 Agent

SQL DB에 대한 질문에 답할 수 있는 에이전트 구축

SQL 쿼리 실행 에이전트 흐름

1. 데이터 스키마 파악 : 사용가능한 테이블 목록을 가져옴
2. 관련 테이블 선택 : 질문과 연관된 테이블을 선택
3. DDL 조회 : 선택된 테이블의 스키마 정의 (DDL)를 가져옴
4. 쿼리 생성 : 질문과 DDL 정보에 기반하여 SQL 쿼리를 작성
5. 쿼리 점검 : LLM을 사용하여 일반적인 오류를 검토하고 쿼리를 개선
6. 쿼리 실행 및 오류 처리 : 데이터베이스 엔진에 쿼리를 실행하고, 오류 발생 시 수정하여 성공적으로 쿼리 수행. 
7. 응답 생성 : 쿼리 결과를 기반으로 최종 답변 제공. 

![SQL Agent](https://raw.githubusercontent.com/teddylee777/langchain-kr/7bc7263c00f7ce7eb20464415e8a53217e4ff3f9/17-LangGraph/03-Use-Cases/assets/langgraph-sql-agent.png)


- 데이터베이스 : SQLite 데이터 베이스 설정 및 `chinook` 샘플 데이터베이스 로드
- 유틸리티 함수 : 에이전트 구현을 위한 유틸리티 함수 정의
- 도구 정의 : 데이터베이스와 상호작용하기 위한 도구 정의
- 워크 플로우 정의 : 에이 전트의 워크 플로우(그래프) 정의
- 그래프 시각화 : 정의된 그래프 시각화
- 에이전트 실행 : 에이전트 실행 및 결과 확인
- 평가 : 에이전트 평가 및 성능 비교

